<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*const fetchOption = {
        method: "GET",
        headers: new Headers({ "content-type": "application/wasm" }),
        mode: "no-cors",
      };
      var asmLibraryArg = {
        emscripten_memcpy_big: () => HEAPU8.copyWithin(dest, src, src + num),
        fd_close: _fd_close,
        fd_seek: _fd_seek,
        fd_write: _fd_write,
        setTempRet0: (val) => setTempRet0(val),
      };
      var info = {
        env: asmLibraryArg,
        wasi_snapshot_preview1: asmLibraryArg,
      };
      fetch("http://localhost:5500/compiled/a.out.wasm")
        .then((response) => response.arrayBuffer())
        .then((bytes) => WebAssembly.instantiate(bytes, info))
        .then((result) => {
          result.instance.exports.myFunction();
          // Do something with the results!
        });
      */
      /*WebAssembly.instantiateStreaming(
        fetch("http://localhost:5500/compiled/test_add.wasm"),
        {}
      ).then((results) => {
        // Do something with the results!
        console.dir(results);
      });*/

      const importedObj = {
        env: {
          printf: console.log,
        },
      };

      fetch("http://localhost:5500/compiled/test_print.wasm")
        .then((response) => response.arrayBuffer())
        .then((bytes) => WebAssembly.instantiate(bytes, importedObj))
        .then((results) => {
          console.dir(results);
          results.instance.exports._Z5printv();
          // Do something with the results!
        });
    </script>
  </body>
</html>
